<form enctype="multipart/form-data" [formGroup]="updateUserForm" (ngSubmit)="updateUser()" class="grid grid-cols-3">
    <div class="flex flex-col items-center relative  space-y-4 ">
        <!-- avatar form -->
        <div class=" mt-8  relative flex ml-8 flex-0 w-48 h-48 rounded-full">
            <div
                class="relative flex items-center justify-center w-40 h-40 rounded-full overflow-hidden ring-4 ring-bg-card">
                <div *ngIf="imagePreview || editMode" class="absolute inset-0 bg-black bg-opacity-50 z-10">
                </div>
                <div class="absolute inset-0 flex items-center justify-center z-20">
                    <div>
                        <input id="avatar-file-input" class="absolute h-0 w-0 opacity-0 invisible pointer-events-none"
                            type="file" [multiple]="false" (change)="uploadProfilePhoto($event)" accept="image/*" />

                        <label *ngIf="editMode"
                            class="flex items-center justify-center w-10 h-10 rounded-full cursor-pointer hover:bg-hover"
                            for="avatar-file-input" matRipple>
                            <mat-icon class="text-white" [svgIcon]="'heroicons_outline:camera'"></mat-icon>
                        </label>

                    </div>
                </div> <img class="w-full h-full absolute object-cover" alt="Preview"
                    *ngIf="imagePreview || sonicUser.photo" [src]="sonicUser.photo || imagePreview" />
            </div>
        </div>
        <!-- actions -->
        <!-- edit -->
        <button *ngIf="!editMode" mat-stroked-button [matTooltip]="'Edit'" (click)="toggleEditMode()">
            <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:pencil-square'"></mat-icon>
            <span class="ml-2">Edit</span>
        </button>
        <!-- save -->
        <button *ngIf="editMode" mat-stroked-button (click)="toggleEditMode()">
            <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:check'"></mat-icon>
            <span class="ml-2">Update</span>
        </button>
        <!-- Cancel -->
        <button *ngIf="editMode" mat-button (click)="toggleEditMode()">
            Cancel
        </button>
    </div>
    <!-- username, first_name, last_name, email, created_at, updated_at -->
    <div class="mt-4 col-span-2 grid grid-cols-2 gap-y-1 gap-x-4">
        <!-- username -->
        <mat-form-field class="w-full col-span-2">
            <mat-label>Username</mat-label>
            <mat-icon class="icon-size-5" matPrefix [svgIcon]="'mat_solid:person'"></mat-icon>
            <input matInput *ngIf="!editMode" readonly [value]="sonicUser.username" />
            <input matInput *ngIf="editMode" [value]="sonicUser.username" />
        </mat-form-field>
        <!-- first_name, last_name -->
        <mat-form-field class="w-full">
            <mat-label>First Name</mat-label>
            <mat-icon class="icon-size-5" matPrefix [svgIcon]="'mat_solid:person'"></mat-icon>
            <input matInput *ngIf="!editMode" readonly [value]="sonicUser.first_name" />
            <input matInput *ngIf="editMode" [value]="sonicUser.first_name" />
        </mat-form-field>
        <mat-form-field class="w-full">
            <mat-label>Last Name</mat-label>
            <mat-icon class="icon-size-5" matPrefix [svgIcon]="'mat_solid:person'"></mat-icon>
            <input matInput *ngIf="!editMode" readonly [value]="sonicUser.last_name" />
            <input matInput *ngIf="editMode" [value]="sonicUser.last_name" />
        </mat-form-field>
        <!-- email -->
        <mat-form-field class="w-full">
            <mat-label>Email</mat-label>
            <mat-icon class="icon-size-5" matPrefix [svgIcon]="'heroicons_solid:envelope'"></mat-icon>
            <input matInput readonly *ngIf="!editMode" [value]="sonicUser.email" />
            <input matInput *ngIf="editMode" [value]="sonicUser.email" />
        </mat-form-field>
        <!-- email -->
        <mat-form-field class="w-full">
            <mat-label>Phone</mat-label>
            <mat-icon class="icon-size-5" matPrefix [svgIcon]="'mat_solid:phone'"></mat-icon>
            <input matInput readonly *ngIf="!editMode" [value]="sonicUser.phone" />
            <input matInput *ngIf="editMode" [value]="sonicUser.phone" />
        </mat-form-field>
        <!-- create_at -->
        <mat-form-field class="w-full">
            <mat-label>Joined</mat-label>
            <mat-icon class="icon-size-5" matPrefix [svgIcon]="'mat_solid:calendar_today'"></mat-icon>
            <input matInput readonly [value]="
                                            sonicUser.created_at
                                                | date : 'MMM d, y, h:mm a'
                                        " />
        </mat-form-field>
        <!-- email -->
        <mat-form-field class="w-full">
            <mat-label>Last Update</mat-label>
            <mat-icon class="icon-size-5" matPrefix [svgIcon]="'mat_solid:calendar_today'"></mat-icon>
            <input matInput readonly [value]="
                                            sonicUser.updated_at
                                                | date : 'MMM d, y, h:mm a'
                                        " />
        </mat-form-field>
    </div>
</form>